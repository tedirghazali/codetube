/* Devstratum JQP Graph | v1.1 | MIT License | Author: Sergey Osipov | https://devstratum.ru | info@devstartum.ru | https://github.com/devstratum/Devstratum-JQP-Graph */
!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):"undefined"!=typeof exports?module.exports=r(require("jquery")):r(jQuery)}(function(t){var i={title:"",description:"",unit:"",better:"",type:"number",separate:!1,grid_wmax:0,grid_part:5,points:[],graphs:[]};function c(r){var t=0,i=r.split(":");return i.reverse(),i[2]&&(t+=3600*Number(i[2])),i[1]&&(t+=60*Number(i[1])),i[0]&&(t+=Number(i[0])),t}function v(r,t){var i="";return i+='<div class="dvstr-graph__grid">',i+='<div class="dvstr-graph__grid-hrz"></div>',i+='<div class="dvstr-graph__grid-vrt">'+function(r,t){for(var i=0,e="",a=100/t,s=Math.round(r/t);i<t;){e+='<div class="dvstr-graph__grid-vrt-line" style="left:'+Math.floor(i*a)+'%;"><span>'+i*s+"</span></div>",i++}return e}(r,t)+"</div>",i+='<div class="dvstr-graph__grid-end"><span>'+r+"</span></div>",i+="</div>"}function n(r){var t="";t+='<div class="dvstr-graph__header">',r.title&&(t+='<div class="dvstr-graph__title">'+r.title+"</div>"),t+='<div class="dvstr-graph__header-flex">',r.unit&&(t+='<div class="dvstr-graph__header-flex-item">',t+='<div class="dvstr-graph__unit">'+r.unit+"</div>",t+="</div>");var i=function(r){var i="";"object"==typeof r.points&&(i+='<div class="dvstr-graph__point">',r.points.forEach(function(r){var t="";r.color&&(t="background: "+r.color+";"),r.title&&(i+='<div class="dvstr-graph__point-item">',i+='<span class="dvstr-graph__point-item-color" style="'+t+';"></span>',i+='<span class="dvstr-graph__point-item-title">'+r.title+"</span>",i+="</div>")}),i+="</div>");return i}(r);return i&&(t+='<div class="dvstr-graph__header-flex-item">',t+=i,t+="</div>"),r.better&&(t+='<div class="dvstr-graph__header-flex-item">',t+='<div class="dvstr-graph__better">('+r.better+")</div>",t+="</div>"),t+="</div>",r.description&&(t+='<div class="dvstr-graph__description">'+r.description+"</div>"),t+="</div>"}function e(r,t){var p,o,l,i=function(t){var r=0;if(t.grid_wmax&&"number"==typeof t.grid_wmax)r=t.grid_wmax;else{var i=0;"object"==typeof t.graphs&&t.graphs.forEach(function(r){r.value.forEach(function(r){"time"===t.type&&(r=c(r)),i<r&&(i=r)})}),r=100<i?100*Math.ceil(i/100):Math.ceil(i)}return r}(t),e=v(i,t.grid_part),a=n(t),s=(o=i,l="","object"==typeof(p=t).graphs&&p.graphs.forEach(function(v){if(l+='<div class="dvstr-graph__item">',l+='<div class="dvstr-graph__label">'+v.label+"</div>",l+='<div class="dvstr-graph__group">',v.value){var n=999;v.value.forEach(function(r,t){if("time"===p.type){var i=r;r=c(r)}if("number"==typeof r){var e="z-index: "+n--+";",a="width: "+(r/o*100).toFixed(4)+"%;",s="";v.color&&(s="background: "+v.color[t]+";");var d="position: absolute;";p.separate&&(d="position: relative;"),l+='<div class="dvstr-graph__line" style="'+a+s+d+e+'">',"time"===p.type&&(l+='<i class="time">'+i+"</i>"),l+="<span>"+r+"</span>",l+="</div>"}})}l+="</div>",l+="</div>"}),l),d="";d+='<div class="dvstr-graph">',d+=a,i&&(d+='<div class="dvstr-graph__body">',d+=e,d+=s,d+="</div>"),d+="</div>",r.append(d)}var a={init:function(r){e(this,t.extend({},i,r))}};t.fn.dvstr_graph=function(r){return a[r]?a[r].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof r&&r?(t.error("dvstr_graph method: "+r+"not found"),!0):a.init.apply(this,arguments)}});